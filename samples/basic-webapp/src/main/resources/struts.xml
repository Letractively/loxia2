<?xml version="1.0"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
    
<struts>
	<package name="default" extends="struts-default">
		<result-types>
			<result-type name="json" class="cn.benjamin.loxia.web.result.JsonResult"/>
		</result-types>
		<interceptors>
			<interceptor name="exceptionEx" class="cn.benjamin.loxia.web.interceptor.ExceptionInterceptor"/>
			<interceptor name="paramsEx" class="cn.benjamin.loxia.web.interceptor.ParametersExInterceptor"/>
			<interceptor name="authorization" class="cn.benjamin.loxia.web.interceptor.AuthorizationInterceptor"/>
			
			<interceptor-stack name="defaultStack">
            <interceptor-ref name="exceptionEx"><param name="debug">true</param></interceptor-ref>
            <interceptor-ref name="alias"/>
            <interceptor-ref name="servletConfig"/>
            <interceptor-ref name="i18n"/>
            <interceptor-ref name="prepare"/>
            <interceptor-ref name="chain"/>
            <interceptor-ref name="debugging"/>            
            <interceptor-ref name="scopedModelDriven"/>
            <interceptor-ref name="modelDriven"/>                        
            <interceptor-ref name="fileUpload"/>
            <interceptor-ref name="checkbox"/>
            <interceptor-ref name="multiselect"/>
            <interceptor-ref name="staticParams"/>
            <interceptor-ref name="actionMappingParams"/>
            <interceptor-ref name="paramsEx">
              <param name="ordered">true</param>
              <param name="excludeParams">dojo\..*,^struts\..*</param>
            </interceptor-ref>
            <interceptor-ref name="authorization"/>
            <interceptor-ref name="conversionError"/>
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
        </interceptor-stack>
		</interceptors>		
		<global-results>
			<result name="error">/error.jsp</result>
			<result name="json" type="json">
				<param name="charSet">UTF-8</param>
			</result>
		</global-results>
		<global-exception-mappings>
			<exception-mapping exception="java.lang.Exception" result="error"/>
		</global-exception-mappings>
	</package>
	<package name="/" extends="default" namespace="/">
		<action name="desktop" class="desktopAction">
			<result>/desktop.jsp</result>
		</action>
		<action name="logout" method="logout" class="desktopAction">
			<result>/login.jsp</result>
		</action>
		<action name="uploadportrait" method="uploadPortrait" class="desktopAction">
			<result>/commons/attach_result.jsp</result>
		</action>
	</package>
	<package name="user" extends="default" namespace="/user">
		<action name="adduserentry" class="userMaintainAction">
			<result>/user/user_add.jsp</result>
		</action>		
		<action name="maintaintodolistentry" method="maintainTodoListEntry" class="userMaintainAction">
			<result>/user/user_maintain_todolist.jsp</result>
		</action>
		<action name="maintaintodolist" method="maintainTodoList" class="userMaintainAction">
			<result>/user/user_maintain_todolist.jsp</result>
		</action>
		<action name="adduser" method="addUser" class="userMaintainAction"/>
		<action name="deleteuser" method="deleteUser" class="userMaintainAction"/>
		<action name="edituserentry" method="editUser" class="userMaintainAction">
			<result name="json">/user/user_modify.jsp</result>
		</action>
		<action name="modifyuserrentry" method="modifyUser" class="userMaintainAction"/>
		<action name="uploadportrait" method="uploadPortrait" class="userMaintainAction">
			<result>/commons/attach_result.jsp</result>
		</action>		
		<action name="viewuser" method="viewUser" class="userMaintainAction"/>
		<action name="updatehabbit" method="updateHabbit" class="userMaintainAction"/>
		<action name="updatedescription" method="updateDescription" class="userMaintainAction"/>				
	</package>
	<package name="commons" extends="default" namespace="/commons">
		<action name="getattachment" class="getAttachmentAction">
			<result type="stream">
				<param name="contentType">${contentType}</param>
				<param name="inputName">inputStream</param>
				<param name="bufferSize">4096</param>
				<param name="contentDisposition">
					inline;filename="${filename}"
				</param>
			</result>
		</action>		
		<action name="getusersindesktop" method="getUsers" class="desktopAction"/>
		<action name="gettodayswork" method="getTodaysWork" class="desktopAction"/>
		<action name="checkuserunique" method="checkUserUnique" class="userMaintainAction"/>
	</package>
</struts>